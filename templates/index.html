{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h3 class="card-title mb-0">Upload Audio File</h3>
            </div>
            <div class="card-body">
                <form action="/upload" method="post" enctype="multipart/form-data" id="uploadForm">
                        <h5>Choose an audio file</h5>
                        <p class="text-muted">Supported formats: WAV, MP3</p>
                        <input type="file" class="form-control" name="file" id="fileInput" accept=".wav,.mp3" required style="display: none;">
                        <button type="button" class="btn btn-primary" onclick="document.getElementById('fileInput').click()">
                            Select File
                        </button>
                    

                    <div id="fileInfo" class="alert alert-info" style="display: none;">
                        <strong>Selected file:</strong> <span id="fileName"></span>
                    </div>

                    <div class="mb-3">
                        <label for="model" class="form-label">Choose Model:</label>
                        <select class="form-select" name="model" id="model">
                            <option value="ensemble">Ensemble</option>
                            <option value="rf">Random Forest</option>
                            <option value="gb">Gradient Boosting</option>
                            <option value="lr">Logistic Regression</option>
                            <option value="svm">Support Vector Machine</option>
                        </select>
                    </div>

                    <button type="submit" class="btn btn-success btn-lg w-100" id="submitBtn" disabled>
                        <i class="fas fa-magic"></i> Classify Genre
                    </button>
                </form>
            </div>
        </div>

    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    const fileInput = document.getElementById('fileInput');
    const fileInfo = document.getElementById('fileInfo');
    const fileName = document.getElementById('fileName');
    const submitBtn = document.getElementById('submitBtn');

    fileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
            fileName.textContent = this.files[0].name;
            fileInfo.style.display = 'block';
            submitBtn.disabled = false;
        }
    });

    uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        
        const files = e.dataTransfer.files;
        if (files.length > 0) {
            fileInput.files = files;
            fileName.textContent = files[0].name;
            fileInfo.style.display = 'block';
            submitBtn.disabled = false;
        }
    });
</script>
{% endblock %}
